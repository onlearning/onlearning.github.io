import{_ as n,c as a,a2 as l,o as p}from"./chunks/framework.DPuwY6B9.js";const m=JSON.parse('{"title":"JS 实现金额格式化","description":"","frontmatter":{},"headers":[],"relativePath":"src/skill/JS实现金额格式化.md","filePath":"src/skill/JS实现金额格式化.md","lastUpdated":1714114110000}'),o={name:"src/skill/JS实现金额格式化.md"};function e(r,s,c,t,y,i){return p(),a("div",null,s[0]||(s[0]=[l(`<h1 id="js-实现金额格式化" tabindex="-1">JS 实现金额格式化 <a class="header-anchor" href="#js-实现金额格式化" aria-label="Permalink to &quot;JS 实现金额格式化&quot;">​</a></h1><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">moneyFormatter</span><span style="color:#D73A49;"> =</span><span style="color:#D73A49;"> function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">money</span><span style="color:#24292E;">, </span><span style="color:#E36209;">num</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">  /*</span></span>
<span class="line"><span style="color:#6A737D;">   * 参数说明：</span></span>
<span class="line"><span style="color:#6A737D;">   * money：要格式化的数字</span></span>
<span class="line"><span style="color:#6A737D;">   * num：保留几位小数</span></span>
<span class="line"><span style="color:#6A737D;">   * */</span></span>
<span class="line"><span style="color:#24292E;">  num </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> num </span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;"> 0</span><span style="color:#D73A49;"> &amp;&amp;</span><span style="color:#24292E;"> num </span><span style="color:#D73A49;">&lt;=</span><span style="color:#005CC5;"> 20</span><span style="color:#D73A49;"> ?</span><span style="color:#24292E;"> num </span><span style="color:#D73A49;">:</span><span style="color:#005CC5;"> 2</span></span>
<span class="line"><span style="color:#24292E;">  money </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> &#39;&#39;</span></span>
<span class="line"><span style="color:#D73A49;">  var</span><span style="color:#24292E;"> index </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">indexOf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#005CC5;"> 1</span></span>
<span class="line"><span style="color:#D73A49;">  if</span><span style="color:#24292E;"> (index </span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;"> 1</span><span style="color:#D73A49;"> &amp;&amp;</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">substring</span><span style="color:#24292E;">(index, money.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;">).</span><span style="color:#005CC5;">length</span><span style="color:#D73A49;"> &gt;</span><span style="color:#24292E;"> num) {</span></span>
<span class="line"><span style="color:#24292E;">    money </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">substring</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, index </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> num)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  money </span><span style="color:#D73A49;">=</span><span style="color:#6F42C1;"> parseFloat</span><span style="color:#24292E;">((money </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> &#39;&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">replace</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/</span><span style="color:#005CC5;">[</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">\\d.-]</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">)).</span><span style="color:#6F42C1;">toFixed</span><span style="color:#24292E;">(num) </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> &#39;&#39;</span></span>
<span class="line"><span style="color:#D73A49;">  var</span><span style="color:#24292E;"> l </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">)[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">].</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">reverse</span><span style="color:#24292E;">(),</span></span>
<span class="line"><span style="color:#24292E;">    r </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">)[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">  var</span><span style="color:#24292E;"> t </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &#39;&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    i</span></span>
<span class="line"><span style="color:#D73A49;">  for</span><span style="color:#24292E;"> (i </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> l.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    t </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> l[i] </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> ((i </span><span style="color:#D73A49;">+</span><span style="color:#005CC5;"> 1</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">%</span><span style="color:#005CC5;"> 3</span><span style="color:#D73A49;"> ==</span><span style="color:#005CC5;"> 0</span><span style="color:#D73A49;"> &amp;&amp;</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">+</span><span style="color:#005CC5;"> 1</span><span style="color:#D73A49;"> !=</span><span style="color:#24292E;"> l.</span><span style="color:#005CC5;">length</span><span style="color:#D73A49;"> ?</span><span style="color:#032F62;"> &#39;,&#39;</span><span style="color:#D73A49;"> :</span><span style="color:#032F62;"> &#39;&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#D73A49;">  return</span><span style="color:#24292E;"> t.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">reverse</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> &#39;.&#39;</span><span style="color:#D73A49;"> +</span><span style="color:#24292E;"> r</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="如果金额有负数-需要判断是否为负数" tabindex="-1">如果金额有负数，需要判断是否为负数 <a class="header-anchor" href="#如果金额有负数-需要判断是否为负数" aria-label="Permalink to &quot;如果金额有负数，需要判断是否为负数&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">moneyFormatter</span><span style="color:#D73A49;"> =</span><span style="color:#D73A49;"> function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">money</span><span style="color:#24292E;">, </span><span style="color:#E36209;">num</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">  /*</span></span>
<span class="line"><span style="color:#6A737D;">   * 参数说明：</span></span>
<span class="line"><span style="color:#6A737D;">   * money：要格式化的数字</span></span>
<span class="line"><span style="color:#6A737D;">   * num：保留几位小数</span></span>
<span class="line"><span style="color:#6A737D;">   * */</span></span>
<span class="line"><span style="color:#24292E;">  num </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> num </span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;"> 0</span><span style="color:#D73A49;"> &amp;&amp;</span><span style="color:#24292E;"> num </span><span style="color:#D73A49;">&lt;=</span><span style="color:#005CC5;"> 20</span><span style="color:#D73A49;"> ?</span><span style="color:#24292E;"> num </span><span style="color:#D73A49;">:</span><span style="color:#005CC5;"> 2</span></span>
<span class="line"><span style="color:#24292E;">  money </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> &#39;&#39;</span></span>
<span class="line"><span style="color:#D73A49;">  var</span><span style="color:#24292E;"> index </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">indexOf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#005CC5;"> 1</span></span>
<span class="line"><span style="color:#D73A49;">  if</span><span style="color:#24292E;"> (index </span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;"> 1</span><span style="color:#D73A49;"> &amp;&amp;</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">substring</span><span style="color:#24292E;">(index, money.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;">).</span><span style="color:#005CC5;">length</span><span style="color:#D73A49;"> &gt;</span><span style="color:#24292E;"> num) {</span></span>
<span class="line"><span style="color:#24292E;">    money </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">substring</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, index </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> num)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  money </span><span style="color:#D73A49;">=</span><span style="color:#6F42C1;"> parseFloat</span><span style="color:#24292E;">((money </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> &#39;&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">replace</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/</span><span style="color:#005CC5;">[</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">\\d.-]</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">)).</span><span style="color:#6F42C1;">toFixed</span><span style="color:#24292E;">(num) </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> &#39;&#39;</span></span>
<span class="line"><span style="color:#D73A49;">  var</span><span style="color:#24292E;"> l</span></span>
<span class="line"><span style="color:#D73A49;">  let</span><span style="color:#24292E;"> isNegative </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &#39;&#39;</span></span>
<span class="line"><span style="color:#D73A49;">  if</span><span style="color:#24292E;"> (money.</span><span style="color:#6F42C1;">startsWith</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;-&#39;</span><span style="color:#24292E;">)) {</span></span>
<span class="line"><span style="color:#6A737D;">    // 判断为负数  将负号取出</span></span>
<span class="line"><span style="color:#24292E;">    l </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">)[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">].</span><span style="color:#6F42C1;">substring</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, money.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">reverse</span><span style="color:#24292E;">() </span><span style="color:#6A737D;">// 整数部分</span></span>
<span class="line"><span style="color:#24292E;">    isNegative </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">)[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">].</span><span style="color:#6F42C1;">substring</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// 负号</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    l </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">)[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">].</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">reverse</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  r </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">)[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">] </span><span style="color:#6A737D;">// 小数部分</span></span>
<span class="line"><span style="color:#D73A49;">  var</span><span style="color:#24292E;"> t </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &#39;&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    i</span></span>
<span class="line"><span style="color:#D73A49;">  for</span><span style="color:#24292E;"> (i </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> l.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    t </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> l[i] </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> ((i </span><span style="color:#D73A49;">+</span><span style="color:#005CC5;"> 1</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">%</span><span style="color:#005CC5;"> 3</span><span style="color:#D73A49;"> ==</span><span style="color:#005CC5;"> 0</span><span style="color:#D73A49;"> &amp;&amp;</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">+</span><span style="color:#005CC5;"> 1</span><span style="color:#D73A49;"> !=</span><span style="color:#24292E;"> l.</span><span style="color:#005CC5;">length</span><span style="color:#D73A49;"> ?</span><span style="color:#032F62;"> &#39;,&#39;</span><span style="color:#D73A49;"> :</span><span style="color:#032F62;"> &#39;&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#D73A49;">  return</span><span style="color:#24292E;"> isNegative </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> t.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">reverse</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#032F62;"> &#39;.&#39;</span><span style="color:#D73A49;"> +</span><span style="color:#24292E;"> r</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div>`,4)]))}const C=n(o,[["render",e]]);export{m as __pageData,C as default};
